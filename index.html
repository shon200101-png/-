<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ï∂úÍ∑º Ï†Ñ Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏ üêª</title>
  <style>
    body{font-family:'Noto Sans KR',sans-serif;background:#f8fafc;margin:0;padding:24px;display:flex;justify-content:center}
    .container{background:#fff;padding:24px;border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,0.05);width:100%;max-width:480px}
    h1{text-align:center;font-size:1.4rem;margin-bottom:20px}
    ul{list-style:none;padding:0;margin:0}
    li{display:flex;align-items:center;border-bottom:1px solid #eee;padding:10px 0}
    li:last-child{border-bottom:0}
    label{flex:1;cursor:pointer}
    input[type=checkbox]{width:20px;height:20px;margin-right:8px}
    .done{text-decoration:line-through;color:#9ca3af}
    .stamp{font-size:0.85rem;color:#6b7280;margin-left:40px;vertical-align:middle;display:inline-block}
    .bear-icon{width:20px;height:20px;display:inline-block;margin-left:-40px;margin-right:50px;vertical-align:middle;}
    @keyframes bearPop{0%{transform:scale(0);opacity:0;}80%{transform:scale(1.2);}100%{transform:scale(1);opacity:1;}}
    .bear-pop{animation:bearPop 0.4s ease-out forwards;}
    .controls{margin-top:16px;display:flex;gap:8px;flex-wrap:wrap}
    button{flex:1;padding:8px 10px;border:none;border-radius:8px;cursor:pointer;font-size:0.9rem}
    .primary{background:#2563eb;color:#fff}
    .secondary{background:#fff;color:#2563eb;border:1px solid #cbd5e1}
    .add-task{display:flex;margin-top:16px;gap:8px}
    .add-task input{flex:1;padding:8px;border:1px solid #d1d5db;border-radius:8px;font-size:0.9rem}
    .add-task button{flex:0 0 33%;background:transparent;color:#2563eb;border:1px solid #2563eb;}
  </style>
</head>
<body>
  <div class="container">
    <h1>Ï∂úÍ∑º Ï†Ñ Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏ üêª</h1>
    <ul id="taskList"></ul>

    <div class="add-task">
      <input type="text" id="newTaskInput" placeholder="ÏÉà Ìï≠Î™© ÏûÖÎ†•..." />
      <button id="addTaskBtn" class="primary">Ï∂îÍ∞Ä</button>
    </div>

    <div class="controls">
      <button id="checkAll" class="primary">Ï†ÑÏ≤¥ Ï≤¥ÌÅ¨</button>
      <button id="uncheckAll" class="secondary">Ï†ÑÏ≤¥ Ìï¥Ï†ú</button>
    </div>
  </div>

  <script>
    const STORAGE_KEY = 'checklist-v2';
    const DEFAULT_TASKS = [
      {text:'ÎèÑÏãúÎùΩ Ï±ôÍπÄ', done:false},
      {text:'ÏßÄÍ∞ë Ï±ôÍπÄ', done:false},
      {text:'Î∞©Ïùò Î∂àÎì§ Î™®Îëê ÎÅî', done:false}
    ];

    function loadTasks(){
      const saved = localStorage.getItem(STORAGE_KEY);
      return saved ? JSON.parse(saved) : DEFAULT_TASKS;
    }

    function saveTasks(tasks){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks));
    }

    function renderTasks(){
      const list = document.getElementById('taskList');
      list.innerHTML='';
      tasks.forEach((task,i)=>{
        const li=document.createElement('li');
        const cb=document.createElement('input');
        cb.type='checkbox';cb.checked=task.done;
        const label=document.createElement('label');
        label.textContent=task.text;

        const stamp=document.createElement('span');
        stamp.className='stamp';

        if(task.done){
          label.classList.add('done');
          const date=new Date();
          stamp.textContent=`(${date.toLocaleDateString('ko-KR',{year:'numeric',month:'2-digit',day:'2-digit',weekday:'short'})} ${date.toLocaleTimeString('ko-KR',{hour:'2-digit',minute:'2-digit'})})`;
          const bear=document.createElement('span');
          bear.className='bear-icon bear-pop';
          bear.textContent='üêª';
          stamp.insertAdjacentElement('beforebegin',bear);
        }

        cb.addEventListener('change',()=>{
          task.done=cb.checked;
          if(task.done){
            label.classList.add('done');
            const date=new Date();
            stamp.textContent=`(${date.toLocaleDateString('ko-KR',{year:'numeric',month:'2-digit',day:'2-digit',weekday:'short'})} ${date.toLocaleTimeString('ko-KR',{hour:'2-digit',minute:'2-digit'})})`;
            const bear=document.createElement('span');
            bear.className='bear-icon bear-pop';
            bear.textContent='üêª';
            stamp.insertAdjacentElement('beforebegin',bear);
          } else {
            label.classList.remove('done');
            stamp.textContent='';
            const existingBear=li.querySelector('.bear-icon');
            if(existingBear) existingBear.remove();
          }
          saveTasks(tasks);
        });

        li.appendChild(cb);
        li.appendChild(label);
        li.appendChild(stamp);
        list.appendChild(li);
      });
    }

    let tasks=loadTasks();
    renderTasks();

    document.getElementById('addTaskBtn').addEventListener('click',()=>{
      const input=document.getElementById('newTaskInput');
      const text=input.value.trim();
      if(!text) return;
      tasks.push({text,done:false});
      saveTasks(tasks);
      input.value='';
      renderTasks();
    });

    document.getElementById('newTaskInput').addEventListener('keypress',(e)=>{
      if(e.key==='Enter'){
        document.getElementById('addTaskBtn').click();
      }
    });

    document.getElementById('checkAll').addEventListener('click',()=>{
      tasks.forEach(t=>t.done=true);saveTasks(tasks);renderTasks();
    });

    document.getElementById('uncheckAll').addEventListener('click',()=>{
      tasks.forEach(t=>t.done=false);saveTasks(tasks);renderTasks();
    });
  </script>
</body>
</html>